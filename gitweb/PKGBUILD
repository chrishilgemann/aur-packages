# Maintainer: Phillip Smith <fukawi2@NO-SPAM.gmail.com>
pkgname=gitweb
pkgver=1.7.0
pkgrel=1
pkgdesc="web gui for the fast distributed version control system"
arch=('i686' 'x86_64')
url="http://git-scm.com/"
license=('GPL2')
depends=('curl' 'expat>=2.0' 'perl-error' 'perl>=5.10.0')
source=("http://kernel.org/pub/software/scm/git/git-${pkgver}.tar.bz2")
md5sums=('c7553b73e2156d187ece6ba936ae30ab')

build() {
  cd $srcdir/git-$pkgver/

  make configure || return 1

  ./configure --prefix=/usr || return 1

  make gitweb/gitweb.cgi || return 1
}

package() {
  cd $srcdir/git-$pkgver/$pkgname

  for F in gitweb.cgi gitweb.css git-logo.png git-favicon.png ; do
    install -Dm644 $F $pkgdir/srv/http/gitweb/$F || return 1
  done

  # Make the main gitweb.cgi executable
  chmod 755 $pkgdir/srv/http/gitweb/gitweb.cgi || return 1
}

# vim:set ts=2 sw=2 et:
