# Maintainer: Phillip Smith <fukawi2@NO-SPAM.gmail.com>
# http://github.com/fukawi2/aur-packages

pkgname=mirrorbrain
pkgver=2.12.0
pkgrel=1
pkgdesc="an open source framework to run a content delivery network using mirror servers."
arch=('i686' 'x86_64')
url="http://mirrorbrain.org"
license=('GPL')
groups=()
depends=('apache>=2.2.6' 'apache-mod_form' 'apache-mod_geoip2' 'geoip'
         'perl' 'perl-config-ini' 'perl-libwww' 'perl-dbd-pg' 'perl-digest-md4' 'perl-timedate'
         'python' 'python-psycopg2' 'python-sqlobject' 'cmdln')
makedepends=('apache>=2.2.6' 'apache-mod_form')
optdepends=('postgresqli-server: recommended database, but can use any database the Apache DBD API supports'
            'mod_asn: refined mirror selection and full exploitation of network locality')
provides=('mod_mirrorbrain')
backup=()
options=()
install=
source=("http://mirrorbrain.org/files/releases/$pkgname-$pkgver.tar.gz")
md5sums=('70136666f62a3dd4fd9b1785690e4b7d')

build() {
  cd "$srcdir/$pkgname-$pkgver/mod_mirrorbrain/"
  apxs -c mod_mirrorbrain.c || return 1
}

package() {
  cd "$srcdir/$pkgname-$pkgver/mod_mirrorbrain/"
  install -Dm0755 .libs/mod_mirrorbrain.so $pkgdir/usr/lib/httpd/modules/mod_mirrorbrain.so || return 1
}

# vim:set ts=2 sw=2 et:
